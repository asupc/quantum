(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2c3257fe"],{"0f37":function(e,t,a){"use strict";a.d(t,"a",(function(){return o}));var n=a("66df"),o=function(){return n["a"].request({url:"/api/Enum",method:"get"})}},"767f":function(e,t,a){"use strict";a("9cdd")},"9cdd":function(e,t,a){},d085:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",[a("Form",{attrs:{"label-width":80},nativeOn:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.preventDefault(),e.LoadCommand(1))}}},[a("Row",[a("Col",{attrs:{span:"4"}},[a("FormItem",{attrs:{label:"搜索"}},[a("Input",{attrs:{placeholder:"输入搜索关键字"},model:{value:e.QueryForm.Key,callback:function(t){e.$set(e.QueryForm,"Key",t)},expression:"QueryForm.Key"}})],1)],1),e._v("\n         \n        "),a("Button",{attrs:{type:"info"},on:{click:function(t){return e.LoadCommand(1)}}},[a("Icon",{attrs:{type:"md-search"}}),e._v(" 搜索\n        ")],1)],1)],1)],1),a("div",{staticStyle:{margin:"20px 0"}},[a("Button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.editCommand(-1)}}},[a("Icon",{attrs:{type:"md-add"}}),e._v(" 添加\n    ")],1),e._v("\n     \n    "),a("Button",{attrs:{type:"error",size:"small"},on:{click:e.deleteSelection}},[a("Icon",{attrs:{type:"md-trash"}}),e._v(" 删除\n    ")],1)],1),a("Table",{ref:"EnvTable",attrs:{stripe:"",border:"",columns:e.CommandColumns,data:e.CommadnData}}),a("div",{staticStyle:{margin:"10px",overflow:"hidden"}},[a("div",{staticStyle:{float:"right"}},[a("Page",{attrs:{total:e.PageInfo.Total,current:e.QueryForm.PageIndex,"page-size":e.QueryForm.PageSize,"show-sizer":!0,"show-total":!0,"page-size-opts":e.PageInfo.PageSizeOpts},on:{"on-change":e.LoadCommand}})],1)]),a("Modal",{attrs:{"mask-closable":!1,title:e.EditCommandModal.Title,width:600},model:{value:e.EditCommandModal.Show,callback:function(t){e.$set(e.EditCommandModal,"Show",t)},expression:"EditCommandModal.Show"}},[a("Form",{ref:"editCommandForm",attrs:{model:e.EditCommandModal.Data,rules:e.ruleValidate,"label-width":80}},[a("FormItem",{attrs:{label:"指令",prop:"Key"}},[a("Input",{attrs:{placeholder:"输入快捷回复指令"},model:{value:e.EditCommandModal.Data.Key,callback:function(t){e.$set(e.EditCommandModal.Data,"Key",t)},expression:"EditCommandModal.Data.Key"}},[a("Checkbox",{attrs:{slot:"append"},slot:"append",model:{value:e.EditCommandModal.Data.EnableRegex,callback:function(t){e.$set(e.EditCommandModal.Data,"EnableRegex",t)},expression:"EditCommandModal.Data.EnableRegex"}},[e._v("正则")])],1)],1),a("FormItem",{attrs:{label:"回复内容",prop:"Message"}},[a("Input",{attrs:{type:"textarea"},model:{value:e.EditCommandModal.Data.Message,callback:function(t){e.$set(e.EditCommandModal.Data,"Message",t)},expression:"EditCommandModal.Data.Message"}})],1),a("FormItem",{attrs:{label:"消息类型",prop:"MessageType"}},[a("Select",{attrs:{clearable:""},on:{"on-change":e.MessageType},model:{value:e.EditCommandModal.Data.MessageType,callback:function(t){e.$set(e.EditCommandModal.Data,"MessageType",t)},expression:"EditCommandModal.Data.MessageType"}},e._l(e.AllEnums.MessageType,(function(t){return a("Option",{key:t.Value,attrs:{value:t.Value}},[e._v("\n            "+e._s(t.Key)+"\n          ")])})),1)],1),a("FormItem",{attrs:{label:"通信类型",prop:"CommunicationType"}},[a("Select",{attrs:{clearable:"",placeholder:"指定通讯类型，如选择QQ，则只有QQ用户发送指令才回复"},on:{"on-change":e.EnvTypeChange},model:{value:e.EditCommandModal.Data.CommunicationType,callback:function(t){e.$set(e.EditCommandModal.Data,"CommunicationType",t)},expression:"EditCommandModal.Data.CommunicationType"}},e._l(e.AllEnums.CommunicationType,(function(t){return a("Option",{key:t.Value,attrs:{value:t.Value}},[e._v("\n            "+e._s(t.Key)+"\n          ")])})),1)],1),a("FormItem",{attrs:{label:"是否启用"}},[a("Checkbox",{model:{value:e.EditCommandModal.Data.Enable,callback:function(t){e.$set(e.EditCommandModal.Data,"Enable",t)},expression:"EditCommandModal.Data.Enable"}},[e._v("启用")])],1),a("FormItem",{attrs:{label:"备注"}},[a("Input",{attrs:{type:"textarea"},model:{value:e.EditCommandModal.Data.Remark,callback:function(t){e.$set(e.EditCommandModal.Data,"Remark",t)},expression:"EditCommandModal.Data.Remark"}})],1)],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{staticStyle:{"margin-left":"8px"},on:{click:function(t){return e.handleCancel()}}},[e._v("取消")]),a("Button",{attrs:{type:"primary"},on:{click:function(t){return e.handleSubmit("editCommandForm")}}},[e._v("提交")])],1)],1)],1)},o=[],l=(a("7f7f"),a("66df")),i=function(e){return l["a"].request({url:"/api/Command",params:e,method:"get"})},d=function(e){return l["a"].request({url:"/api/Command",data:e,method:"post"})},r=function(e){return l["a"].request({url:"/api/Command",data:e,method:"delete"})},s=a("c276"),m=a("0f37"),c={data:function(){var e=this;return{CommandColumns:[{type:"selection",width:60,align:"center"},{width:80,type:"index",title:"序号",align:"center"},{title:"指令",key:"Key",width:120},{title:"消息类型",key:"MessageType",width:120,render:function(t,a){return t("div",[t("span",Object(s["c"])(e.AllEnums,"MessageType",a.row.MessageType)||"文本")])}},{title:"通讯类型",key:"CommunicationType",width:120,render:function(t,a){return t("div",[t("span",Object(s["c"])(e.AllEnums,"CommunicationType",a.row.CommunicationType)||"全部")])}},{title:"状态",key:"Enable",width:80,render:function(e,t){return e("div",[e("span",{style:{color:t.row.Enable?"green":"red"}},t.row.Enable?"启用":"禁用")])}},{title:"回复内容",key:"Message",minWidth:180,render:function(t,a){return e.tdTip(t,a,"Message")}},{title:"备注",key:"Remark",render:function(t,a){return e.tdTip(t,a,"Remark")}},{title:"操作",key:"action",width:150,align:"center",render:function(t,a){var n=[];return n.push(t("i",{class:"fa fa-pencil",style:{color:"#ff6a00"},on:{click:function(){e.editCommand(a.index)}}})),n.push(t("i",{class:"fa fa-trash",style:{color:"#f00"},on:{click:function(){e.delete([a.row.Id])}}})),t("div",n)}}],QueryForm:{PageIndex:1,PageSize:20},PageInfo:{Total:0,PageSizeOpts:[10,20,50,100]},AllEnums:{},QLPanels:[],CommadnData:[],EditCommandModal:{Show:!1,Title:"添加快捷回复",Data:{Enable:!0,EnableAll:!1,EnvType:"",Weight:1}},SelectAllQL:!0,ruleValidate:{Name:[{required:!0,message:"指令不能为空",trigger:"blur"}],Value:[{required:!0,message:"回复内容不能为空",trigger:"blur"}]}}},methods:{appointQLPanel:function(){},deleteSelection:function(){var e=[],t=this.$refs.EnvTable.getSelection();if(null!=t&&0!=t.length){for(var a=0;a<t.length;a++){var n=t[a];e.push(n.Id)}this.delete(e)}else this.$Message.warning("请选中后再操作！")},EnvTypeChange:function(){this.SelectAllQL=1==this.EnvType,this.SelectAllQLChange()},handleSubmit:function(e){var t=this;this.$refs[e].validate((function(e){if(e){var a=JSON.parse(JSON.stringify(t.EditCommandModal.Data));d(a).then((function(e){e&&(t.$Message.success(t.EditCommandModal.Title+"成功！"),t.EditCommandModal.Show=!1,t.LoadCommand())}))}}))},handleCancel:function(){this.EditCommandModal.Show=!1},SelectAllQLChange:function(){for(var e=0;e<this.EditCommandModal.Data.QLPanelEnvs.length;e++)this.EditCommandModal.Data.QLPanelEnvs[e].Enable=this.SelectAllQL},editCommand:function(e){e>-1?(this.EditCommandModal.Title="修改快捷回复",this.EditCommandModal.Data=JSON.parse(JSON.stringify(this.CommadnData[e])),this.EditCommandModal.Data.QLPanelEnvs=[]):(this.EditCommandModal.Data={Key:"",Message:"",CommunicationType:null,MessageType:1,Enable:!0},this.EditCommandModal.Title="添加快捷回复"),this.EditCommandModal.Show=!0},delete:function(e){var t=this;this.$Modal.confirm({title:"删除确认",content:"确定删除吗？该操作不可逆。",okText:"是的，老子要删除",cancelText:"算了，不删了",closable:!0,onOk:function(){r(e).then((function(e){t.LoadCommand(1)}))}})},loadAllEnums:function(){var e=this;Object(m["a"])().then((function(t){e.AllEnums=t}))},LoadCommand:function(e){var t=this;this.QueryForm.PageIndex=e,i(this.QueryForm).then((function(e){t.CommadnData=e.Data,t.PageInfo.Total=e.TotalCount}))},tdTip:function(e,t,a){var n=this,o=[],l=t.row[a];return o.push(e("a",{style:{display:"inline-block",width:"100%",textIndent:"0px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},attrs:{title:l},on:{click:function(){n.copy(l)}}},l)),e("div",{style:{width:"100%"}},o)},copy:function(e){var t=this;this.$copyText(e).then((function(e){t.$Message.success("复制成功！")}),(function(e){t.$Message.error("复制失败！")}))}},mounted:function(){this.LoadCommand(1),this.loadAllEnums()}},u=c,p=(a("767f"),a("2877")),f=Object(p["a"])(u,n,o,!1,null,null,null);t["default"]=f.exports}}]);